edition = "2023";

package blob.v1;

import "buf/validate/validate.proto";
import "google/protobuf/go_features.proto";

option features.(pb.go).api_level = API_OPAQUE;

service BlobService {
  rpc ListBlobs(ListBlobsRequest) returns (ListBlobsResponse) {}
  rpc GetBlob(GetBlobRequest) returns (GetBlobResponse) {}
  rpc SetBlob(SetBlobRequest) returns (SetBlobResponse) {}
  rpc DeleteBlob(DeleteBlobRequest) returns (DeleteBlobResponse) {}
}

message Blob {
  string name = 1 [(buf.validate.field).required = true];
  bytes content = 2 [(buf.validate.field).required = true];
}

message ListBlobsRequest {
  string path = 1 [(buf.validate.field).required = true];
}

message ListBlobsResponse {
  repeated string names = 1;
}

message GetBlobRequest {
  string name = 1 [(buf.validate.field).required = true];
}

message GetBlobResponse {
  Blob blob = 1 [(buf.validate.field).required = true];
}

message SetBlobRequest {
  string name = 1 [(buf.validate.field).required = true];
  bytes content = 2 [(buf.validate.field).required = true];
}

message SetBlobResponse {}

message DeleteBlobRequest {
  string name = 1 [(buf.validate.field).required = true];
}

message DeleteBlobResponse {}
